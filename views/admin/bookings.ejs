<%- include("../partials/header") -%>
<link rel="stylesheet" href="/css/navbar.css">
<link rel="stylesheet" href="/css/styles.css">
  <title>Bookings</title>
</head>
<body>
  <%- include("adminpartials/adminnavbar") -%>
  <div class="container content">

    <h2><%= Message %></h2>
    <form action="/admin/bookings/filters" method="post">
      Location:<input type="text" name="location">
      Date: <input type="date" name="date">
      Status: <input type="text" list="status" name="status">
      <datalist id="status">
        <option value="Accepted">Accepted</option>
        <option value="Rejected">Rejected</option>
        <option value="Pending">Pending</option>
      </datalist>
      <button type="submit">Apply Filter</button>
    </form>
    <h1>Bookings</h1>

    <% Bookings.forEach((Booking)=>{ %>
      <div class="card text-white bg-primary mb-3" style="max-width: 18rem;">
        <div class="card-header">location:<%=Booking.location %></div>
        <div class="card-header">Username:<%=Booking.username %></div>
        <div class="card-body">
          <h5 class="card-title">servicename:<%= Booking.servicename %></h5>
          <h5 class="card-title">requestdate:<%= Booking.requestdate.toISOString().replace(/T/, ' ').replace(/\..+/, '').substr(0, 11).split("-").reverse().join("-"); %></h5>
          <h5 class="card-title">requesttime:<%= Booking.requesttime %></h5>
          <% if(Booking.status===1) { %>
            <h5 class="card-title">status:Pending</h5>
            <a class="btn btn-dark" href="/admin/decision/accept/<%= Booking.username %>/<%= Booking.location %>/<%= Booking.servicename %>">Accept</a>
            <a class="btn btn-dark" href="/admin/decision/reject/<%= Booking.username %>/<%= Booking.location %>/<%= Booking.servicename %>">Reject</a>
          <% } %>
          <% if(Booking.status===0) { %>
            <h5 class="card-title">status:Accepted</h5>
            <a class="btn btn-dark" href="/admin/decision/reject/<%= Booking.username %>/<%= Booking.location %>/<%= Booking.servicename %>">Reject</a>
          <% }  %>
          <%  if(Booking.status===2) { %>
            <h5 class="card-title">status:Rejected</h5>
            <a class="btn btn-dark" href="/admin/decision/accept/<%= Booking.username %>/<%= Booking.location %>/<%= Booking.servicename %>">Accept</a>
          <% } %>
          
        </div>
      </div>
    <% }) %>
    
  </div>
  
</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</html>